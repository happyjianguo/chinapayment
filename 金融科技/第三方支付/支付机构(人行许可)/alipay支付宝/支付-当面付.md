



https://docs.open.alipay.com/194



开发文档-当面付-产品介绍-本页导航

# 当面付产品介绍更新时间：2017-06-01

线下当面付产品支持条码支付、扫码支付、声波支付。

# 条码支付（[接入指引](https://docs.open.alipay.com/194/106039)）

条码支付是支付宝给到线下传统行业的一种收款方式。商家使用扫码枪等条码识别设备扫描用户支付宝钱包上的条码/二维码，完成收款。用户仅需出示付款码，所有收款操作由商家端完成。

业务流程：

![img](http://img01.taobaocdn.com/top/i1/LB1CH8ELXXXXXaWXFXXXXXXXXXX)

使用步骤：

1. 用户登录支付宝钱包，点击首页“付款”，进入付款码界面；
2. 收银员在商家收银系统操作生成订单，用户确认支付金额；
3. 用户出示钱包的“付款码”，收银员用扫码设备来扫描用户手机上的条码/二维码后，商家收银系统提交支付；
4. 付款成功后商家收银系统会拿到支付成功或者失败的结果。

![img](http://img01.taobaocdn.com/top/i1/LB19pFQKVXXXXbKapXXXXXXXXXX)

 

产品特点：

- 收银系统需要有红外扫描枪设备；
- 用户仅出示手机即可完成付款，方便快捷；
- 手机无网络要求，可离线支付；
- 资金实时到账，无现金流压力；
- 支付宝会根据交易金额、登录状态等信息判断是否需要用户输入密码。

# 扫码支付（[接入指引](https://docs.open.alipay.com/194/106078)）

扫码支付，指用户打开支付宝钱包中的“扫一扫”功能，扫描商家展示在某收银场景下的二维码并进行支付的模式。该模式适用于线下实体店支付、面对面支付等场景。

业务流程：

![img](http://img01.taobaocdn.com/top/i1/LB1KXhmLXXXXXaIapXXXXXXXXXX)

使用步骤：

1. 收银员在商家收银系统操作生成支付宝订单，并生成二维码；
2. 用户登录支付宝钱包，点击首页“付款-扫码付”或直接点击“扫一扫”，进入扫一扫界面；
3. 用户扫收银员提供的二维码，核对金额，确认支付；
4. 用户付款后商家收银系统会拿到支付成功或者失败的结果。

![img](http://img01.taobaocdn.com/top/i1/LB1UHBDLXXXXXbdXFXXXXXXXXXX)

产品特点：

- 用户仅出示手机扫码即可完成付款，方便快捷；
- 资金实时到账，无现金流压力。

# 声波支付

声波支付是指用户打开支付宝钱包内“当面付-声波付”，对准商家所提供的声波接收终端（如：麦克风或带声波支付功能的自助售货机），并完成支付的模式。该模式适用于线下实体店支付、自助售货机等场景

业务流程：

![img](http://img01.taobaocdn.com/top/i1/LB18dhsLXXXXXblaXXXXXXXXXXX)

使用步骤：

1. 用户登录支付宝钱包，点击首页“付款”，选择声波付，进入声波付界面；
2. 用户在售货机上购买商品，售货机系统生成支付宝订单，用户确认支付金额；
3. 用户出示钱包的“声波付”，对准售货机的声波接收的装置；
4. 售货机收到声波请求后，售货机系统向支付宝提交支付请求；
5. 付款成功后后商家收银系统会拿到支付成功或者失败的结果。   

![img](http://img01.taobaocdn.com/top/i1/LB1u_hJLXXXXXaTXpXXXXXXXXXX)

产品特点：

- 收银系统需要有声波接收终端；
- 用户仅出示手机即可完成付款，方便快捷；
- 手机无网络要求，可离线支付；
- 资金实时到账，无现金流压力；
- 支付宝会根据交易金额、登录状态等信息判断是否需要用户输入密码。 

# 云监控

监控能力作为业务保障的基础，蚂蚁开放了云监控给已接入当面付产品的合作伙伴，进入“[开放平台-开发者中心-研发管理-云监控](https://openmonitor.alipay.com/openmonitor/vpidfacepay.htm)”可以查看。云监控提供实时业务稳定性监控数据、异常告警机制，同时也提供健康度分析，可查看潜在集成问题，方便服务商能够更加稳健地保障业务发展。

更多详情请参见“[云监控文档](https://docs.open.alipay.com/264/105815)”。

![img](http://img01.taobaocdn.com/top/i1/LB1x0iqOpXXXXbcXFXXXXXXXXXX)

![img](http://img01.taobaocdn.com/top/i1/LB1xdapOpXXXXXkXFXXXXXXXXXX)

产品特点：

- 监控免费开放给商家和合作伙伴使用，可监控到ISV、商家、门店的交易、异常和性能。
- 为业务稳定运行提供实时监控保障护航。

# 适用场景

通过接入支付宝当面付，提供一种新的线下收银方式，快速收银。

免资金找零，假残币风险，核对方便，提升资金利用率。

# 使用说明

条码支付主要提供以下接口

| **接口名称**   | **描述**           | **主要参数**                             | **调用建议**                         | **使用场景**                                 |
| ---------- | ---------------- | ------------------------------------ | -------------------------------- | ---------------------------------------- |
| 条码支付接口     | 通过调用该接口创建支付宝交易订单 | 商户订单号、支付场景、订单总金额、订单标题、付款码、外部门店号、商品信息 | 收银系统和支付宝已经打通                     | 收银员使用扫码设备读取用户支付宝钱包“付款码”后，将二维码或条码信息和订单信息通过本接口上送至支付宝发起支付。 |
| 查询订单接口     | 通过调用该接口查询订单的状态   | 交易号、商户订单号                            | 商户可以通过本接口主动查询订单状态，来决策完成下一步的业务逻辑。 | 商家后台、网络、服务器等出现异常，商户系统最终未接收到支付通知；调用条码支付接口后，返回系统错误或未知交易状态情况；调用条码支付请求后，返回处理中的状态（返回结果中的code等于10003）；**注意：**调用撤销接口之前，需通过查询订单接口确认该笔交易目前支付状态。 |
| 撤销订单接口     | 通过调用该接口撤销订单      | 交易号、商户订单号                            | 商户可以通过本接口对于支付结果未知的订单主动撤销。        | 只有发生支付系统超时或者支付结果未知时可调用撤销，其他正常支付的单如需实现相同功能请调用申请退款。提交支付交易后调用【查询订单】，没有明确的支付结果再调用【撤销订单】**注意：** 撤销订单只能撤销24H内交易的订单，超过24H无法撤销。 |
| 同步退款接口     | 支持部分和全部退款        | 交易号、商户订单号、退款金额、退款原因、退款流水号            | 如果需要退款，则使用该接口，如果是部分退款，必须要传入退款流水号 | 当交易发生之后一段时间内，由于买家或者卖家的原因需退款，卖家可通过退款接口将支付款退还给买家，支付宝将在收到退款请求并验证成功后，按退款规则将支付款按原路退到买家账号上 |
| 交易关闭接口     | 交易关闭接口           | 交易号、商户订单号                            | 无                                | 用于交易创建后，用户在一定时间内未进行支付，可调用该接口直接将未付款的交易进行关闭 |
| 交易保障接口     | 监控到收银的性能和异常      | 交易耗时，交易状态                            | 每隔固定周期调用一次（建议小等于30分钟）            | 对于条码支付、声波支付的场景进行集成                       |
| 查询账单下载地址接口 | 查询账单下载地址         | 账单日期                                 | 最晚只能下载前一天的账单                     | 下载账单文件实现自动对账                             |

扫码支付主要提供以下接口：

| **接口名称**   | **描述**         | **主要参数**                    | **调用建议**                         | **使用场景**                                 |
| ---------- | -------------- | --------------------------- | -------------------------------- | ---------------------------------------- |
| 预下单接口      | 创建支付宝交易订单      | 订单金额、订单标题、门店号、机具号、商品信息、支付场景 | 无                                | 收银系统通过本接口将订单信息上送至支付宝后，将支付宝返回的二维码信息展示给用户，由用户扫描二维码完成订单支付。 |
| 查询订单接口     | 通过调用该接口查询订单的状态 | 交易号、商户订单号                   | 商户可以通过本接口主动查询订单状态，来决策完成下一步的业务逻辑。 | 商户后台、网络、服务器等出现异常，商户系统最终未接收到支付通知；调用条码支付接口后，返回系统错误或未知交易状态情况；调用条码支付请求后，返回处理中的状态（返回结果中的code等于10003）；**注意：**调用撤销接口之前，需通过查询订单接口确认该笔交易目前支付状态。 |
| 撤销订单接口     | 通过调用该接口撤销订单    | 交易号、商户订单号                   | 商户可以通过本接口对于支付结果未知的订单主动撤销。        | 只有发生支付系统超时或者支付结果未知时可调用撤销，其他正常支付的单如需实现相同功能请调用申请退款。提交支付交易后调用【查询订单】，没有明确的支付结果再调用【撤销订单】**注意：** 撤销订单只能撤销24H内交易的订单，超过24H无法撤销。 |
| 同步退款接口     | 支持部分和全部退款      | 交易号、商户订单号、退款金额、退款原因、退款批次    | 如果需要退款，则使用该接口，如果是部分退款，必须要传入退款批次号 | 当交易发生之后一段时间内，由于买家或者卖家的原因需退款，卖家可通过退款接口将支付款退还给买家，支付宝将在收到退款请求并验证成功后，按退款规则将支付款按原路退到买家账号上 |
| 交易关闭接口     | 交易关闭接口         | 交易号、商户订单号                   | 无                                | 用于交易创建后，用户在一定时间内未进行支付，可调用该接口直接将未付款的交易进行关闭 |
| 查询账单下载地址接口 | 查询账单下载地址       | 账单日期                        | 最晚只能下载前一天的账单                     | 下载账单文件实现自动对账                             |

声波支付主要提供以下接口：

| **接口名称**   | **描述**           | **主要参数**                             | **调用建议**                         | **使用场景**                                 |
| ---------- | ---------------- | ------------------------------------ | -------------------------------- | ---------------------------------------- |
| 声波支付接口     | 通过调用该接口创建支付宝交易订单 | 商户订单号、支付场景、订单总金额、订单标题、付款码、外部门店号、商品信息 | 收银系统和支付宝已经打通                     | 收银员使用声波获取设备（如麦克风）读取用户支付宝钱包的声波信息后，将声波信息通过本接口上送至支付宝发起支付。 |
| 查询订单接口     | 通过调用该接口查询订单的状态   | 交易号、商户订单号                            | 商户可以通过本接口主动查询订单状态，来决策完成下一步的业务逻辑。 | 商户后台、网络、服务器等出现异常，商户系统最终未接收到支付通知；调用条码支付接口后，返回系统错误或未知交易状态情况；调用条码支付请求后，返回处理中的状态（返回结果中的code等于10003）；**注意：**调用撤销接口之前，需通过查询订单接口确认该笔交易目前支付状态。 |
| 撤销订单接口     | 通过调用该接口撤销订单      | 交易号、商户订单号                            | 商户可以通过本接口对于支付结果未知的订单主动撤销。        | 只有发生支付系统超时或者支付结果未知时可调用撤销，其他正常支付的单如需实现相同功能请调用申请退款。提交支付交易后调用【查询订单】，没有明确的支付结果再调用【撤销订单】**注意：** 撤销订单只能撤销24H内交易的订单，超过24H无法撤销。 |
| 同步退款接口     | 支持部分和全部退款        | 交易号、商户订单号、退款金额、退款原因、退款流水号            | 如果需要退款，则使用该接口，如果是部分退款，必须要传入退款流水号 | 当交易发生之后一段时间内，由于买家或者卖家的原因需退款，卖家可通过退款接口将支付款退还给买家，支付宝将在收到退款请求并验证成功后，按退款规则将支付款按原路退到买家账号上 |
| 交易关闭接口     | 交易关闭接口           | 交易号、商户订单号                            | 无                                | 用于交易创建后，用户在一定时间内未进行支付，可调用该接口直接将未付款的交易进行关闭 |
| 交易保障接口     | 监控到收银的性能和异常      | 交易耗时，交易状态                            | 每隔固定周期调用一次（建议小等于30分钟）            | 对于条码支付、声波支付的场景进行集成                       |
| 查询账单下载地址接口 | 查询账单下载地址         | 账单日期                                 | 最晚只能下载前一天的账单                     | 下载账单文件实现自动对账                             |

# 应用案例

条码支付：联华、物美、KFC、麦当劳等，可以自行到店体验。

扫码支付：海底捞、望湘园等，可以自行到店体验。

声波支付：友宝等自助售货机可以自行购买体验。

交易保障：KFC、费睿、三大POS机具厂商等。

# 产品关联推荐

- 口碑开店，详情请点击[查看](https://docs.open.alipay.com/205/105192)
- 店铺营销，详情请点击[查看](https://docs.open.alipay.com/209/105228)
- 店铺广告投放，详情请点击[查看](https://docs.open.alipay.com/213/105079)

# 准入条件

个体工商户/个人商户：

- 允许以个人账户来签约，账户必须完成实名认证；
- 商户选择营业执照（营业执照为非必选项），营业执照的法人必须跟签约账户的主体保持一致。风控会审核营业执照主体的一致性及营业执照的表面真伪；
- 提供门头照片及内景照片。要求：清晰、无水印、不能反向。

企业商户：

- 账户必须完成实名制认证；
- 如账户没有完成最终的A类认证需要提供开户许可证。风控审核证件的表面真伪，许可证的主体要跟签约主体保持一致；
- 提供门头照片，可不提供内景照片。要求：清晰、无水印、不能反向。

# 计费模式

签约费率

协作费政策，详情请点击[查看](https://docs.open.alipay.com/182/105338)

 

**本接口及文档资料由支付宝提供。您使用本接口，需要遵守开放平台相关协议及支付宝要求。**